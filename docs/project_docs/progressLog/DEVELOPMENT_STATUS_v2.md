# 개발 현황 v2.0 요약 (2025‑10‑02)

v2.0 보고서는 작업서의 업데이트를 반영하여 신규 기능과 데이터베이스
마이그레이션을 요약합니다. 주요 목표는 월별 가입코드, 추천인 시스템,
선호도 Top N 랭킹, 그리고 비공개 프로필 분리를 구현하는 것이었습니다【718878153529655†L7-L69】.

## 신규 기능

1. **월별 가입코드 시스템**: 매월 1일 00:00 KST에 크론잡으로 코드가 자동
   생성되고, 관리자는 활성화 여부와 최대 사용 횟수를 설정할 수 있습니다【718878153529655†L11-L24】.
2. **추천인 시스템**: 사용자가 추천인의 이름을 입력할 수 있으며, 추천인별
   가입자 통계와 최근 추천인 목록을 제공하는 API가 추가되었습니다【718878153529655†L26-L37】.
3. **선호도 Top N 랭킹**: 사용자가 1~5개의 선호 항목을 선택하면 자동으로
   가중치 벡터를 계산하고 순위를 검증하는 로직이 구현되었습니다【718878153529655†L39-L51】.
4. **데이터베이스 확장**: v2 마이그레이션에서 `profiles_private`,
   `referrals`, `survey_options`, `audit_logs` 테이블이 추가되고,
   `preferences` 테이블에 items/weights 컬럼이 추가되었습니다【718878153529655†L64-L71】.

## 구현 현황

백엔드 모듈 10개(Users, Profiles, Photos, Preferences, Codes,
Referrals, Feed, Swipes, Matches, Messages)가 완성되어 전체 구현도의
95%에 도달했습니다【718878153529655†L75-L90】. Redis 캐싱, Firebase Guard,
Swagger API 문서, Docker Compose, NestJS 스케줄러 등 인프라 요소도
구현되었습니다【718878153529655†L91-L99】.

## 다음 단계

1. **공개/비공개 프로필 로직 분리**: `profiles_private` 엔티티를 기반으로
   비공개 프로필 CRUD, 본인/관리자 접근 제어를 구현해야 합니다【718878153529655†L126-L134】.
2. **관리자 API**: 사용자 검색/필터, 코드 생성, 추천인·KPI 통계 등
   관리자용 엔드포인트를 추가합니다【718878153529655†L136-L144】.
3. **Shared Bits 배지 로직**: 피드 서비스에서 공통 취미나 태그를
   추출하여 매칭 카드에 이유 배지를 표시하는 기능을 개발합니다【718878153529655†L146-L152】.
4. **Flutter Web UI 구현**: 가입 플로우, 피드, 매칭, 채팅, 프로필 편집
   페이지를 작업서 §19의 톤앤매너에 따라 개발합니다【718878153529655†L154-L161】.
5. **Survey Options 관리**: 취미/직업/학력 등 옵션을 CRUD하는
   관리자 API를 추가합니다【718878153529655†L162-L169】.

## 보안 및 테스트

Firebase Authentication Guard, JWT 검증, CORS 설정 등 기본 보안은
구현되었으나, RLS(행 수준 보안), 민감 데이터 암호화, Audit Logs,
Rate Limiting, Input Sanitization 등은 향후 과제로 남아 있습니다【718878153529655†L293-L307】.
매칭 알고리즘은 v0(규칙 기반)과 v1(선호도 반영)으로 나뉘며,
가중치 조정이 `.env` 파일을 통해 가능하게 설계되었습니다【718878153529655†L266-L289】.